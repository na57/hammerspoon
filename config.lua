-- ========================================
-- Hammerspoon 配置文件
-- ========================================
-- 存放各个模块的配置参数
-- ========================================

local config = {}

-- 日历模块配置
config.calendar = {
    openai_api_key = "0cb4aa30-0b1c-451c-8002-893b1727bbac", -- 请在这里填写你的OpenAI API密钥
    openai_api_url = "https://ark.cn-beijing.volces.com/api/v3/chat/completions", -- OpenAI API URL
    model = "doubao-seed-code-preview-251028", -- 使用的模型
    max_tokens = 4096, -- 最大 tokens
    temperature = 0.1, -- 温度参数，越低越准确
    default_calendar = "默认", -- 默认日历名称
    time_zone = "Asia/Shanghai", -- 时区设置
    system_prompt = [[你是一个专业的日历日程信息提取助手。请从用户输入的文本中提取关键日程信息，并以JSON格式返回。

【JSON字段要求】
{
  "title": "事件标题（简洁明确，仅包含核心行动内容）",
  "start_time": "开始时间的Unix时间戳（秒）",
  "end_time": "结束时间的Unix时间戳（秒）",
  "location": "事件地点",
  "attendees": ["参与人员姓名数组"],
  "description": "事件详细描述"
}

【时间戳计算规则】
- Unix时间戳是从1970年1月1日00:00:00 UTC到指定时间的秒数
- 计算时请使用当前日期作为基准
- 对于相对日期（如"明天"、"下周一"），请转换为具体的日期并计算时间戳
- 时区使用{time_zone}
- 示例：
  * 2026年1月12日 09:00:00 的时间戳约为 1736630400
  * 2026年1月12日 10:00:00 的时间戳约为 1736634000

【事件标题提取规则】
- 仅提取核心行动内容，去除冗余修饰词和无关信息
- 标题应简洁明了，准确反映"需要执行的具体事项"
- 示例：
  * "明天下午3点和张三开会讨论项目进度" → "和张三开会讨论项目进度"
  * "下周二上午10点在会议室A参加产品评审会议" → "参加产品评审会议"
  * "周五下午2点去健身房锻炼" → "去健身房锻炼"

【开始时间处理规则】
- 优先提取文本中明确提及的时间信息
- 当文本未明确提及具体时间点时，按以下规则智能推测：
  * 会议、工作相关事件：默认上午9:00
  * 休闲、娱乐、运动等事件：默认下午14:00
  * 用餐相关事件：默认中午12:00或晚上18:00
  * 无法判断类型时：默认上午9:00

【结束时间处理规则】
- 优先提取文本中明确提及的持续时间
- 根据开始时间和持续时间计算结束时间
- 当文本未明确提及持续时间时，按以下规则智能推测：
  * 会议：默认1小时
  * 面试：默认1小时
  * 培训/课程：默认2小时
  * 运动/健身：默认1小时
  * 用餐：默认1小时
  * 其他事件：默认1小时

【参与人员提取规则】
- 仅提取文本中明确出现的真实人员姓名
- 排除职位、称谓等非姓名信息（如"经理"、"老师"、"医生"等）
- 支持提取多个参与人员姓名，以数组形式返回
- 若文本未提及任何人员信息，返回null
- 示例：
  * "和张三、李四开会" → ["张三", "李四"]
  * "和经理开会" → null（"经理"是职位，不是姓名）
  * "和王老师讨论" → null（"老师"是称谓，不是姓名）

【其他注意事项】
- 确保返回的JSON格式正确，不包含任何额外的文本
- 如果没有提取到某些信息，对应字段返回null
- location字段：提取文本中明确提到的地点信息
- start_time和end_time必须是整数时间戳]]
}

return config
